# Telegram Digest Bot - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π:**
  - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ —Å–ª–æ–∂–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏: —Ç–µ–º–∞–º–∏, –∫–∞–Ω–∞–ª–∞–º–∏, –≥–ª—É–±–∏–Ω–æ–π –∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ –≤—ã–±–æ—Ä–∫–∏, AI-–ø—Ä–æ–º–ø—Ç–∞–º–∏, –ø–æ—Ä–æ–≥–∞–º–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã–µ –æ–ø—Ü–∏–∏: –≤—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö —Ç–µ–º (–∏–ª–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤) –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤.
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω —Å–ª–æ–∂–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏, —Ç–æ–ª—å–∫–æ –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–µ–º—ã –∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –≤—ã–¥–∞—á–∏.
- **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞:**
  - –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ AI-–ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–µ–º—ã, —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
- **–°–±–æ—Ä –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–¥–±–µ–∫–∞:**
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –ª–∏ –¥–∞–π–¥–∂–µ—Å—Ç –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å (–ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫, "–ø–æ–∫–∞–∑–∞—Ç—å –±–æ–ª—å—à–µ —Ç–∞–∫–æ–≥–æ/–º–µ–Ω—å—à–µ —Ç–∞–∫–æ–≥–æ").
  - –§–∏–¥–±–µ–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–¥–∞—á–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞.
- **–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã:**
  - –ù–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ñ–∏–¥–±–µ–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ç–µ–º –∏ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –∫–∞—á–µ—Å—Ç–≤—É –≤—ã–¥–∞—á–∏ –∏ –º–æ–∂–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
- **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å:**
  - –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —è–∑—ã–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–π–¥–∂–µ—Å—Ç—ã.
  - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫—Ä–∞—Ç–∫–æ–µ summary –Ω–∞ —è–∑—ã–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é LLM (–Ω–∞–ø—Ä–∏–º–µ—Ä, GPT-4).
  - –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –ø–æ—Å—Ç–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫.
  - –í –∫–∞–∂–¥–æ–º –¥–∞–π–¥–∂–µ—Å—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª –ø–æ—Å—Ç–∞ (–≤ Telegram), –∞ —Ç–∞–∫–∂–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∏/–∏–ª–∏ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.
  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–º–µ–Ω–∏—Ç—å LLM –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Google Translate).

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
3. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
4. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
5. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
6. [API –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ](#api-–∏-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ)
7. [–≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#—ç—Ç–∞–ø—ã-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
8. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
9. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
10. [–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –¶–µ–ª—å
–°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤ —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —á–µ—Ä–µ–∑ AI –∏ –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

### üéâ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
**‚úÖ Stage 3 –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù** (8 –¥–µ–∫–∞–±—Ä—è 2025) - **AI Processing & Topic-based Filtering**
- **–†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Binary Relevance + Metrics:** AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç summary –∏–ª–∏ "NULL", –ø–ª—é—Å –º–µ—Ç—Ä–∏–∫–∏ importance/urgency/significance –¥–ª—è —É–º–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑:** AI –ø–æ–Ω–∏–º–∞–µ—Ç —Å–º—ã—Å–ª –ø–æ—Å—Ç–æ–≤, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏—â–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞  
- **–ü–æ–ª–Ω–∞—è End-to-End —Ü–µ–ø–æ—á–∫–∞:** Admin Panel ‚Üí Backend API ‚Üí Userbot ‚Üí N8N ‚Üí AI Analysis ‚Üí Sorted Digest
- **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 4 –ø–æ—Å—Ç–∞ ‚Üí —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ ‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç
- **Workflow v6.2:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –ø–∞—Ä—Å–∏–Ω–≥–∞ OpenAI, —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Stage 4:** Backend API –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –∏–∑ N8N

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö Telegram –∫–∞–Ω–∞–ª–æ–≤
- AI-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫—Ä–∞—Ç–∫–∏—Ö —Å–∞–º–º–∞—Ä–∏
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ —Ç–µ–º–∞–º
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞–º–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –ü—É–±–ª–∏—á–Ω—ã–π –±–æ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–æ–ª–∏
1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** - —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–∫–æ–º –∫–∞–Ω–∞–ª–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–æ–ª—É—á–∞—é—Ç –¥–∞–π–¥–∂–µ—Å—Ç—ã

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û–±—â–∞—è —Å—Ö–µ–º–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Telegram        ‚îÇ     ‚îÇ Python       ‚îÇ     ‚îÇ    n8n      ‚îÇ
‚îÇ Channels        ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Userbot      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Workflows   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                      ‚îÇ
                                                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Users           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ Telegram Bot ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  Database   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
1. Userbot —Å–æ–±–∏—Ä–∞–µ—Ç –ø–æ—Å—Ç—ã –∏–∑ –∫–∞–Ω–∞–ª–æ–≤
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ n8n —á–µ—Ä–µ–∑ webhook
3. n8n –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ AI
4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ë–î
5. Bot –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–π–¥–∂–µ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Python Userbot
**–§—É–Ω–∫—Ü–∏–∏:**
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram API
- –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ/–≤—Ä–µ–º–µ–Ω–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ n8n

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```python
/userbot
‚îú‚îÄ‚îÄ bot.py           # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ channels.py      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏
‚îú‚îÄ‚îÄ parser.py        # –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ webhook.py       # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ n8n
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ requirements.txt
```

### 2. n8n Workflows
**–û—Å–Ω–æ–≤–Ω—ã–µ workflow:**
- **Data Ingestion** - –ø—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –æ—Ç userbot
- **Content Processing** - AI –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
- **Digest Generation** - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
- **Distribution** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

**–ù–æ–¥—ã:**
- Webhook (—Ç—Ä–∏–≥–≥–µ—Ä)
- HTTP Request (AI API)
- Database operations
- Telegram Bot API
- Schedule triggers

### 3. Telegram Bot
**–ö–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- `/start` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
- `/categories` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `/subscribe [category]` - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- `/unsubscribe [category]` - –æ—Ç–ø–∏—Å–∫–∞
- `/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- `/digest` - –ø–æ–ª—É—á–∏—Ç—å –¥–∞–π–¥–∂–µ—Å—Ç —Å–µ–π—á–∞—Å

**–ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:**
- `/admin` - –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- `/add_channel` - –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª
- `/add_category` - —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- `/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
**PostgreSQL/SQLite —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (—Å–º. —Ä–∞–∑–¥–µ–ª –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î)

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Python 3.11** - userbot
- **Telethon** - Telegram userbot API
- **n8n** - workflow automation
- **PostgreSQL/SQLite** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Docker & Docker Compose** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

### AI/ML
- **OpenAI API** / **Claude API** - –¥–ª—è —Å–∞–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏
- **LangChain** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- **Nginx** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - reverse proxy
- **Redis** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

#### users
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    telegram_id BIGINT UNIQUE NOT NULL,
    username VARCHAR(255),
    first_name VARCHAR(255),
    language VARCHAR(10) DEFAULT 'ru',
    timezone VARCHAR(50) DEFAULT 'Europe/Moscow',
    is_active BOOLEAN DEFAULT true,
    is_admin BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### categories
```sql
CREATE TABLE categories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    emoji VARCHAR(10),
    is_active BOOLEAN DEFAULT true,
    ai_prompt TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### channels
```sql
CREATE TABLE channels (
    id SERIAL PRIMARY KEY,
    telegram_id BIGINT UNIQUE NOT NULL,
    username VARCHAR(255),
    title VARCHAR(255),
    is_active BOOLEAN DEFAULT true,
    last_parsed TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### channel_categories
```sql
CREATE TABLE channel_categories (
    channel_id INTEGER REFERENCES channels(id),
    category_id INTEGER REFERENCES categories(id),
    PRIMARY KEY (channel_id, category_id)
);
```

#### user_subscriptions
```sql
CREATE TABLE user_subscriptions (
    user_id INTEGER REFERENCES users(id),
    category_id INTEGER REFERENCES categories(id),
    frequency VARCHAR(50) DEFAULT 'daily',
    delivery_time TIME DEFAULT '09:00',
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (user_id, category_id)
);
```

#### posts
```sql
CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    channel_id INTEGER REFERENCES channels(id),
    telegram_message_id BIGINT,
    content TEXT,
    media_type VARCHAR(50),
    media_url TEXT,
    summary TEXT,
    category_id INTEGER REFERENCES categories(id),
    posted_at TIMESTAMP,
    processed_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### digests
```sql
CREATE TABLE digests (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    category_id INTEGER REFERENCES categories(id),
    content TEXT,
    posts_included INTEGER[],
    delivered_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ö—Ä–∞–Ω–µ–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `.env` —Ñ–∞–π–ª–µ (API –∫–ª—é—á–∏, –ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã)
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –ë–î –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- **ConfigManager** - –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –ª—é–±–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

#### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ** (—Ç–æ–ª—å–∫–æ .env):
   ```bash
   TELEGRAM_API_ID=12345
   TELEGRAM_API_HASH=abcdef...
   BOT_TOKEN=123456:ABC...
   OPENAI_API_KEY=sk-...
   DATABASE_URL=postgresql://...
   ```

2. **–£–º–µ—Ä–µ–Ω–Ω–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ** (–º–æ–∂–Ω–æ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏):
   ```bash
   ADMIN_IDS=123456789,987654321
   ADMIN_USERNAME=admin_user
   ```

3. **–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (—É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å):
   ```bash
   CHECK_INTERVAL=30
   MAX_POSTS_PER_DIGEST=10
   DIGEST_GENERATION_TIME=09:00
   AI_MODEL=gpt-4
   MAX_SUMMARY_LENGTH=150
   ```

#### –¢–∞–±–ª–∏—Ü–∞ config_settings
```sql
CREATE TABLE config_settings (
    id SERIAL PRIMARY KEY,
    key VARCHAR(255) UNIQUE NOT NULL,
    value TEXT,
    value_type VARCHAR(50) DEFAULT 'string', -- string, integer, boolean, float, json
    category VARCHAR(100),
    description TEXT,
    is_editable BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
INSERT INTO config_settings (key, value, value_type, category, description) VALUES
('CHECK_INTERVAL', '30', 'integer', 'system', '–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–Ω–∞–ª–æ–≤ –≤ –º–∏–Ω—É—Ç–∞—Ö'),
('MAX_POSTS_PER_DIGEST', '10', 'integer', 'digest', '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –≤ –¥–∞–π–¥–∂–µ—Å—Ç–µ'),
('DIGEST_GENERATION_TIME', '09:00', 'string', 'digest', '–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤'),
('AI_MODEL', 'gpt-4', 'string', 'ai', '–ú–æ–¥–µ–ª—å AI –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞'),
('MAX_SUMMARY_LENGTH', '150', 'integer', 'ai', '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ summary –≤ —Å–∏–º–≤–æ–ª–∞—Ö');
```

#### ConfigManager –∫–ª–∞—Å—Å
```python
class ConfigManager:
    def __init__(self):
        self.env_vars = self._load_env()
        self.db_settings = self._load_db_settings()
    
    def get(self, key: str, default=None):
        """–ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ .env –∏–ª–∏ –ë–î"""
        # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º .env (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
        if key in self.env_vars:
            return self.env_vars[key]
        
        # –ó–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º –ë–î
        if key in self.db_settings:
            return self.db_settings[key]['value']
        
        return default
    
    def set_db_setting(self, key: str, value: str):
        """–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤ –ë–î"""
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –ë–î
        pass
```

## ‚úÖ –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üéâ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Admin Panel ‚Üî Backend ‚Üî Userbot ‚Üî N8N ‚Üî AI

**–ü–æ–ª–Ω–∞—è End-to-End —Ü–µ–ø–æ—á–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. **Admin Panel** ‚Üí —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. **Backend API** ‚Üí REST endpoints –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏
3. **Userbot** ‚Üí —á–∏—Ç–∞–µ—Ç –∫–∞–Ω–∞–ª—ã –∏–∑ Backend API, —Å–æ–±–∏—Ä–∞–µ—Ç –ø–æ—Å—Ç—ã –∏–∑ Telegram
4. **N8N Workflow** ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç userbot, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ AI
5. **OpenAI Integration** ‚Üí —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å Binary Relevance + Metrics
6. **Digest Generation** ‚Üí —É–º–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ Stage 3:**
- ‚úÖ –ü–æ–ª–Ω–∞—è End-to-End –æ–±—Ä–∞–±–æ—Ç–∫–∞: 4 –ø–æ—Å—Ç–∞ ‚Üí AI –∞–Ω–∞–ª–∏–∑ ‚Üí –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç
- ‚úÖ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑: AI –ø–æ–Ω–∏–º–∞–µ—Ç —Å–º—ã—Å–ª, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
- ‚úÖ Binary Relevance —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è: summary –∏–ª–∏ "NULL" –¥–ª—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–µ—Ç—Ä–∏–∫: importance/urgency/significance –¥–ª—è —É–º–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ Workflow v6.2: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –ø–∞—Ä—Å–∏–Ω–≥–∞ OpenAI –æ—Ç–≤–µ—Ç–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Stage 3:**
```json
{
  "total_posts": 4,
  "relevant_posts": 4,
  "ai_analysis": "–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (–Ω–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)",
  "sorting": "importance*3 + urgency*2 + significance*2 + log(views)",
  "digest_quality": "–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç —Å AI summary"
}
```

### üöÄ –°–õ–ï–î–£–Æ–©–ò–ô –≠–¢–ê–ü: Stage 4 - Backend API –¥–ª—è –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

**–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —à–∞–≥–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ Backend API endpoints –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –∏–∑ N8N
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è "Save to Backend" node —Å —Ä–µ–∞–ª—å–Ω—ã–º API
- –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø—É–±–ª–∏—á–Ω—ã–º Telegram-–±–æ—Ç–æ–º

---

## API –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

### Webhook endpoints (n8n)

#### POST /webhook/telegram-posts
```json
{
    "channel_id": 123456789,
    "messages": [
        {
            "id": 1234,
            "text": "Post content",
            "date": "2025-01-15T10:00:00Z",
            "media": {
                "type": "photo",
                "url": "https://..."
            }
        }
    ]
}
```

#### POST /webhook/trigger-digest
```json
{
    "user_id": 123456789,
    "category_id": 1,
    "type": "manual"
}
```

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ API

#### Userbot ‚Üí n8n
- –ú–µ—Ç–æ–¥: HTTP POST
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: Bearer token
- –§–æ—Ä–º–∞—Ç: JSON
- –ß–∞—Å—Ç–æ—Ç–∞: –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç

#### n8n ‚Üí Telegram Bot
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Bot API
- Webhook –∏–ª–∏ long polling

## –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: MVP (1-2 –Ω–µ–¥–µ–ª–∏)
1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
   - Docker –æ–∫—Ä—É–∂–µ–Ω–∏–µ
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite –¥–ª—è –Ω–∞—á–∞–ª–∞)
   - n8n —É—Å—Ç–∞–Ω–æ–≤–∫–∞

2. **–ë–∞–∑–æ–≤—ã–π userbot**
   - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - –ß—Ç–µ–Ω–∏–µ 2-3 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ n8n

3. **–ü—Ä–æ—Å—Ç–æ–π n8n workflow**
   - –ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
   - –ë–∞–∑–æ–≤–∞—è AI –æ–±—Ä–∞–±–æ—Ç–∫–∞

4. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–æ—Ç**
   - –ö–æ–º–∞–Ω–¥—ã start, help
   - –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞ –∞–¥–º–∏–Ω—É

### –≠—Ç–∞–ø 2: –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (2-3 –Ω–µ–¥–µ–ª–∏)
1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ userbot**
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. **n8n workflows**
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
   - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
   - Scheduled –¥–∞–π–¥–∂–µ—Å—Ç—ã

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –±–æ—Ç**
   - –í—Å–µ –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
   - –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

### –≠—Ç–∞–ø 3: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (2-3 –Ω–µ–¥–µ–ª–∏)
1. **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏
   - –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è AI –æ–±—Ä–∞–±–æ—Ç–∫–∞**
   - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
   - –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
   - –ö–∞—á–µ—Å—Ç–≤–æ —Å–∞–º–º–∞—Ä–∏

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –≠—Ç–∞–ø 4: –ü—Ä–æ–¥–∞–∫—à–Ω (1-2 –Ω–µ–¥–µ–ª–∏)
1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π
   - Rate limiting
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - PostgreSQL –º–∏–≥—Ä–∞—Ü–∏—è
   - Redis –∫–µ—à
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è
   - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker & Docker Compose
- Python 3.11+
- 2GB RAM –º–∏–Ω–∏–º—É–º
- 10GB –¥–∏—Å–∫

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
telegram-digest-bot/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ userbot/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îú‚îÄ‚îÄ n8n/
‚îÇ   ‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îî‚îÄ‚îÄ credentials/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ init.sql
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îî‚îÄ‚îÄ docs/
```

### Docker Compose
```yaml
version: '3.8'

services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: digest_bot
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./database/init.sql:/docker-entrypoint-initdb.d/init.sql

  n8n:
    image: n8nio/n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD}
    volumes:
      - n8n_data:/home/node/.n8n

  userbot:
    build: ./userbot
    environment:
      - API_ID=${TELEGRAM_API_ID}
      - API_HASH=${TELEGRAM_API_HASH}
      - PHONE=${TELEGRAM_PHONE}
      - N8N_WEBHOOK_URL=http://n8n:5678/webhook/telegram-posts
    volumes:
      - ./userbot/session:/app/session
    depends_on:
      - n8n

  telegram-bot:
    build: ./bot
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
      - DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@postgres:5432/digest_bot
    depends_on:
      - postgres

volumes:
  postgres_data:
  n8n_data:
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```bash
# Database
DB_USER=digest_bot
DB_PASSWORD=secure_password

# Telegram
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash
TELEGRAM_PHONE=+1234567890
BOT_TOKEN=bot_token_from_botfather

# n8n
N8N_USER=admin
N8N_PASSWORD=secure_password

# AI
OPENAI_API_KEY=your_openai_key
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
1. **–ò–∑–æ–ª—è—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏** - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
3. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - —Å–µ—Å—Å–∏–∏ –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –∑–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π

### –ú–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π userbot –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
- API —Ç–æ–∫–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### Telegram —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ API
- –†–æ—Ç–∞—Ü–∏—è —Å–µ—Å—Å–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–ª—É–¥–∞ –∏ —Å–ø–∞–º–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç –±–∞–Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–∞

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ
- –ù–µ—Å–∫–æ–ª—å–∫–æ userbot –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
- Load balancing –¥–ª—è –±–æ—Ç–∞
- –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ë–î

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ n8n
- –ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î
- CDN –¥–ª—è –º–µ–¥–∏–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫
- ELK —Å—Ç–µ–∫ –¥–ª—è –ª–æ–≥–æ–≤
- Sentry –¥–ª—è –æ—à–∏–±–æ–∫
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
1. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —è–∑—ã–∫–∏** –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è AI** –ø–æ–¥ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤** –≤ PDF/Email
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏** (RSS, Twitter)
6. **–ü–ª–∞—Ç–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏** –¥–ª—è –ø—Ä–µ–º–∏—É–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- Email —Ä–∞—Å—Å—ã–ª–∫–∞ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
- Webhook –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
- API –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Notion/Obsidian

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫—É—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤. –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞.